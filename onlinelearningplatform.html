<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Online Learning Platform</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <style>
        /* Custom Styles */
        body {
            font-family: 'Arial', sans-serif;
        }

        .hero-section {
            background: linear-gradient(135deg, #007bff, #00ff88);
            padding: 100px 0;
        }

        .animate__animated {
            animation-duration: 1s;
        }

        .course-card, .student-card, .enrolled-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .course-card:hover, .student-card:hover, .enrolled-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        footer {
            background: #343a40;
            padding: 20px 0;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .hero-section h1 {
                font-size: 2rem;
            }
            .hero-section p {
                font-size: 1rem;
            }
            .form-container {
                padding: 15px;
            }
            .card {
                margin-bottom: 15px;
            }
        }
    </style>
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="#">Online Learning</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#courses">Courses</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#students">Students</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#enrolled-students">Enrolled Students</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#add-course">Add Course</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#add-student">Add Student</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#enroll-student">Enroll Student</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-section text-center py-5 bg-primary text-white">
        <div class="container">
            <h1 class="display-4 animate__animated animate__fadeIn">Welcome to Online Learning</h1>
            <p class="lead animate__animated animate__fadeInUp">Learn, Grow, and Succeed with our courses.</p>
        </div>
    </section>

    <!-- Add Course Section -->
    <section id="add-course" class="py-5">
        <div class="container">
            <h2 class="text-center mb-4 animate__animated animate__fadeIn">Add a New Course</h2>
            <div class="row justify-content-center">
                <div class="col-md-6">
                    <form id="addCourseForm" class="animate__animated animate__fadeInUp">
                        <div class="mb-3">
                            <input type="number" class="form-control" id="courseId" placeholder="Course ID" required>
                        </div>
                        <div class="mb-3">
                            <input type="text" class="form-control" id="courseName" placeholder="Course Name" required>
                        </div>
                        <div class="mb-3">
                            <input type="text" class="form-control" id="courseDescription" placeholder="Course Description" required>
                        </div>
                        <div class="mb-3">
                            <input type="number" class="form-control" id="coursePrice" placeholder="Course Price" required>
                        </div>
                        <button type="submit" class="btn btn-primary w-100">Add Course</button>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- Add Student Section -->
    <section id="add-student" class="py-5 bg-light">
        <div class="container">
            <h2 class="text-center mb-4 animate__animated animate__fadeIn">Add a New Student</h2>
            <div class="row justify-content-center">
                <div class="col-md-6">
                    <form id="addStudentForm" class="animate__animated animate__fadeInUp">
                        <div class="mb-3">
                            <input type="number" class="form-control" id="studentId" placeholder="Student ID" required>
                        </div>
                        <div class="mb-3">
                            <input type="text" class="form-control" id="studentName" placeholder="Student Name" required>
                        </div>
                        <div class="mb-3">
                            <input type="email" class="form-control" id="studentEmail" placeholder="Student Email" required>
                        </div>
                        <button type="submit" class="btn btn-primary w-100">Add Student</button>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- Enroll Student in Course Section -->
    <section id="enroll-student" class="py-5">
        <div class="container">
            <h2 class="text-center mb-4 animate__animated animate__fadeIn">Enroll Student in Course</h2>
            <div class="row justify-content-center">
                <div class="col-md-6">
                    <form id="enrollStudentForm" class="animate__animated animate__fadeInUp">
                        <div class="mb-3">
                            <input type="number" class="form-control" id="enrollStudentId" placeholder="Student ID" required>
                        </div>
                        <div class="mb-3">
                            <input type="number" class="form-control" id="enrollCourseId" placeholder="Course ID" required>
                        </div>
                        <button type="submit" class="btn btn-primary w-100">Enroll Student</button>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- Courses Section -->
    <section id="courses" class="py-5 bg-light">
        <div class="container">
            <h2 class="text-center mb-4 animate__animated animate__fadeIn">Available Courses</h2>
            <div class="row" id="coursesList">
                <!-- Courses will be dynamically added here -->
            </div>
        </div>
    </section>

    <!-- Students Section -->
    <section id="students" class="py-5">
        <div class="container">
            <h2 class="text-center mb-4 animate__animated animate__fadeIn">Registered Students</h2>
            <div class="row" id="studentsList">
                <!-- Students will be dynamically added here -->
            </div>
        </div>
    </section>

    <!-- Enrolled Students Section -->
    <section id="enrolled-students" class="py-5 bg-light">
        <div class="container">
            <h2 class="text-center mb-4 animate__animated animate__fadeIn">Enrolled Students</h2>
            <div class="row" id="enrolledStudentsList">
                <!-- Enrolled students will be dynamically added here -->
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-dark text-white text-center py-3">
        <p>&copy; 2023 Online Learning Platform. All rights reserved.</p>
    </footer>

    <!-- Bootstrap JS and dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
    <!-- Custom JS -->
    <script>
        const baseUrl = "http://127.0.0.1:5000"; // Backend URL

        // Add Course
        document.getElementById("addCourseForm").addEventListener("submit", async function (e) {
            e.preventDefault();
            const courseId = document.getElementById("courseId").value;
            const courseName = document.getElementById("courseName").value;
            const courseDescription = document.getElementById("courseDescription").value;
            const coursePrice = document.getElementById("coursePrice").value;

            try {
                const response = await fetch(`${baseUrl}/add_course`, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ courseId, name: courseName, description: courseDescription, price: coursePrice }),
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }

                const data = await response.json();
                console.log(data);
                alert("Course added successfully!");
                document.getElementById("addCourseForm").reset(); // Clear input fields
                fetchCourses(); // Refresh the courses list
            } catch (error) {
                console.error("Fetch error:", error);
                alert("Failed to add course. Check the console for details.");
            }
        });

        // Add Student
        document.getElementById("addStudentForm").addEventListener("submit", async function (e) {
            e.preventDefault();
            const studentId = document.getElementById("studentId").value;
            const studentName = document.getElementById("studentName").value;
            const studentEmail = document.getElementById("studentEmail").value;

            try {
                const response = await fetch(`${baseUrl}/add_student`, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ studentId, name: studentName, email: studentEmail }),
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }

                const data = await response.json();
                console.log(data);
                alert("Student added successfully!");
                document.getElementById("addStudentForm").reset(); // Clear input fields
                fetchStudents(); // Refresh the students list
            } catch (error) {
                console.error("Fetch error:", error);
                alert("Failed to add student. Check the console for details.");
            }
        });

        // Enroll Student in Course
        document.getElementById("enrollStudentForm").addEventListener("submit", async function (e) {
            e.preventDefault();
            const studentId = document.getElementById("enrollStudentId").value;
            const courseId = document.getElementById("enrollCourseId").value;

            try {
                const response = await fetch(`${baseUrl}/enroll_student`, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ studentId, courseId }),
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }

                const data = await response.json();
                console.log(data);
                alert("Student enrolled successfully!");
                document.getElementById("enrollStudentForm").reset(); // Clear input fields
                fetchEnrolledStudents(); // Refresh the enrolled students list
            } catch (error) {
                console.error("Fetch error:", error);
                alert("Failed to enroll student. Check the console for details.");
            }
        });

        // Fetch and Display Courses
        async function fetchCourses() {
            try {
                const response = await fetch(`${baseUrl}/get_courses`);
                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }

                const courses = await response.json();
                const coursesList = document.getElementById("coursesList");
                coursesList.innerHTML = "";

                courses.forEach(course => {
                    const col = document.createElement("div");
                    col.className = "col-md-4 mb-4 animate__animated animate__fadeIn";
                    col.innerHTML = `
                        <div class="card course-card">
                            <div class="card-body">
                                <h5 class="card-title">${course.name} (ID: ${course.courseId})</h5>
                                <p class="card-text">${course.description}</p>
                                <p class="card-text"><strong>Price:</strong> $${course.price}</p>
                                <button class="btn btn-danger btn-sm" onclick="deleteCourse(${course.courseId})">Delete</button>
                            </div>
                        </div>
                    `;
                    coursesList.appendChild(col);
                });
            } catch (error) {
                console.error("Fetch error:", error);
                alert("Failed to fetch courses. Check the console for details.");
            }
        }

        // Fetch and Display Students
        async function fetchStudents() {
            try {
                const response = await fetch(`${baseUrl}/get_students`);
                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }

                const students = await response.json();
                const studentsList = document.getElementById("studentsList");
                studentsList.innerHTML = "";

                students.forEach(student => {
                    const col = document.createElement("div");
                    col.className = "col-md-4 mb-4 animate__animated animate__fadeIn";
                    col.innerHTML = `
                        <div class="card student-card">
                            <div class="card-body">
                                <h5 class="card-title">${student.name} (ID: ${student.studentId})</h5>
                                <p class="card-text">${student.email}</p>
                                <button class="btn btn-danger btn-sm" onclick="deleteStudent(${student.studentId})">Delete</button>
                            </div>
                        </div>
                    `;
                    studentsList.appendChild(col);
                });
            } catch (error) {
                console.error("Fetch error:", error);
                alert("Failed to fetch students. Check the console for details.");
            }
        }

        // Fetch and Display Enrolled Students
        async function fetchEnrolledStudents() {
            try {
                const response = await fetch(`${baseUrl}/get_enrolled_students`);
                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }

                const enrolledStudents = await response.json();
                const enrolledStudentsList = document.getElementById("enrolledStudentsList");
                enrolledStudentsList.innerHTML = "";

                enrolledStudents.forEach(enrollment => {
                    const col = document.createElement("div");
                    col.className = "col-md-4 mb-4 animate__animated animate__fadeIn";
                    col.innerHTML = `
                        <div class="card enrolled-card">
                            <div class="card-body">
                                <h5 class="card-title">${enrollment.studentName} (ID: ${enrollment.studentId})</h5>
                                <p class="card-text">${enrollment.studentEmail}</p>
                                <p class="card-text"><strong>Course:</strong> ${enrollment.courseName} (ID: ${enrollment.courseId})</p>
                                <p class="card-text"><strong>Price:</strong> $${enrollment.coursePrice}</p>
                            </div>
                        </div>
                    `;
                    enrolledStudentsList.appendChild(col);
                });
            } catch (error) {
                console.error("Fetch error:", error);
                alert("Failed to fetch enrolled students. Check the console for details.");
            }
        }

        // Delete Course
        async function deleteCourse(courseId) {
            try {
                const response = await fetch(`${baseUrl}/delete_course/${courseId}`, {
                    method: "DELETE",
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }

                const data = await response.json();
                console.log(data);
                alert("Course deleted successfully!");
                fetchCourses(); // Refresh the courses list
            } catch (error) {
                console.error("Fetch error:", error);
                alert("Failed to delete course. Check the console for details.");
            }
        }

        // Delete Student
        async function deleteStudent(studentId) {
            try {
                const response = await fetch(`${baseUrl}/delete_student/${studentId}`, {
                    method: "DELETE",
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }

                const data = await response.json();
                console.log(data);
                alert("Student deleted successfully!");
                fetchStudents(); // Refresh the students list
            } catch (error) {
                console.error("Fetch error:", error);
                alert("Failed to delete student. Check the console for details.");
            }
        }

        // Initial fetch on page load
        document.addEventListener("DOMContentLoaded", function () {
            fetchCourses();
            fetchStudents();
            fetchEnrolledStudents();
        });
    </script>
</body>
</html>